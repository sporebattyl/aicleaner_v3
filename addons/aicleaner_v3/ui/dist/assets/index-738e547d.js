import{r as e,j as s,c as r,R as t}from"./vendor-react-028964e9.js";import{B as n}from"./vendor-router-5dc2aea0.js";import{_ as a}from"./app-analytics-3785476f.js";import{c as i,a as l,q as c}from"./vendor-icons-3eef39ee.js";import{A as o}from"./app-services-39021a89.js";import{N as d,h as u,B as m,A as j,d as h,e as p,S as f}from"./vendor-ui-95f0caeb.js";import"./vendor-export-9f6dbaf1.js";import"./vendor-utils-818bbafa.js";import"./vendor-misc-6615fe3f.js";import"./vendor-charts-07629b84.js";import"./vendor-date-16f33ebf.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const x=e.lazy(()=>a(()=>import("./app-config-2c637c0d.js").then(e=>e.C),["assets/app-config-2c637c0d.js","assets/vendor-react-028964e9.js","assets/vendor-export-9f6dbaf1.js","assets/vendor-utils-818bbafa.js","assets/app-analytics-3785476f.js","assets/app-services-39021a89.js","assets/vendor-ui-95f0caeb.js","assets/vendor-misc-6615fe3f.js","assets/vendor-ui-6b65892d.css","assets/vendor-charts-07629b84.js","assets/vendor-date-16f33ebf.js","assets/vendor-icons-3eef39ee.js"]).then(e=>({default:e.ConfigurationManager}))),y=e.lazy(()=>a(()=>import("./app-analytics-3785476f.js").then(e=>e.M),["assets/app-analytics-3785476f.js","assets/vendor-react-028964e9.js","assets/vendor-export-9f6dbaf1.js","assets/vendor-utils-818bbafa.js","assets/vendor-misc-6615fe3f.js","assets/app-services-39021a89.js","assets/vendor-ui-95f0caeb.js","assets/vendor-ui-6b65892d.css","assets/vendor-charts-07629b84.js","assets/vendor-date-16f33ebf.js"]).then(e=>({default:e.MonitoringDashboard}))),v=e.lazy(()=>a(()=>import("./DeviceController-dd76b2d9.js"),["assets/DeviceController-dd76b2d9.js","assets/vendor-react-028964e9.js","assets/vendor-export-9f6dbaf1.js","assets/vendor-utils-818bbafa.js","assets/app-analytics-3785476f.js","assets/app-services-39021a89.js","assets/vendor-ui-95f0caeb.js","assets/vendor-misc-6615fe3f.js","assets/vendor-ui-6b65892d.css","assets/vendor-charts-07629b84.js","assets/vendor-date-16f33ebf.js"]).then(e=>({default:e.DeviceController}))),g=e.lazy(()=>a(()=>import("./ZoneManager-a42bcd8c.js"),["assets/ZoneManager-a42bcd8c.js","assets/vendor-react-028964e9.js","assets/vendor-export-9f6dbaf1.js","assets/vendor-utils-818bbafa.js","assets/app-analytics-3785476f.js","assets/app-services-39021a89.js","assets/vendor-ui-95f0caeb.js","assets/vendor-misc-6615fe3f.js","assets/vendor-ui-6b65892d.css","assets/vendor-charts-07629b84.js","assets/vendor-date-16f33ebf.js"]).then(e=>({default:e.ZoneManager}))),_=e.lazy(()=>a(()=>import("./app-security-9140124e.js"),["assets/app-security-9140124e.js","assets/vendor-react-028964e9.js","assets/vendor-export-9f6dbaf1.js","assets/vendor-utils-818bbafa.js","assets/app-analytics-3785476f.js","assets/app-services-39021a89.js","assets/vendor-ui-95f0caeb.js","assets/vendor-misc-6615fe3f.js","assets/vendor-ui-6b65892d.css","assets/vendor-charts-07629b84.js","assets/vendor-date-16f33ebf.js","assets/vendor-icons-3eef39ee.js"]).then(e=>({default:e.SecurityDashboard}))),b=e.lazy(()=>a(()=>import("./app-config-2c637c0d.js").then(e=>e.U),["assets/app-config-2c637c0d.js","assets/vendor-react-028964e9.js","assets/vendor-export-9f6dbaf1.js","assets/vendor-utils-818bbafa.js","assets/app-analytics-3785476f.js","assets/app-services-39021a89.js","assets/vendor-ui-95f0caeb.js","assets/vendor-misc-6615fe3f.js","assets/vendor-ui-6b65892d.css","assets/vendor-charts-07629b84.js","assets/vendor-date-16f33ebf.js","assets/vendor-icons-3eef39ee.js"]).then(e=>({default:e.UnifiedConfigurationPanel})));function S(){const[r,t]=e.useState("dashboard"),[n,a]=e.useState(null),[S,N]=e.useState(null);e.useEffect(()=>{E();const e=setInterval(E,6e4);return()=>clearInterval(e)},[]);const E=()=>{return e=this,s=null,r=function*(){try{const[e,s]=yield Promise.all([o.get("/api/security").catch(()=>null),o.get("/api/mqtt/status").catch(()=>null)]);a(e),N(s)}catch(e){}},new Promise((t,n)=>{var a=e=>{try{l(r.next(e))}catch(s){n(s)}},i=e=>{try{l(r.throw(e))}catch(s){n(s)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,i);l((r=r.apply(e,s)).next())});var e,s,r},P=()=>s.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:s.jsx(f,{animation:"border",role:"status",variant:"primary",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})})});return s.jsxs("div",{className:"App",children:[s.jsx(d,{bg:"light",expand:"lg",className:"mb-4",children:s.jsxs(u,{fluid:!0,children:[s.jsxs(d.Brand,{href:"#home",children:[s.jsx("strong",{children:"AICleaner v3"}),"low"===(null==n?void 0:n.security_level)&&s.jsxs(m,{bg:"danger",className:"ms-2",children:[s.jsx(i,{className:"me-1"}),"Security Issue"]})]}),s.jsx(d.Toggle,{"aria-controls":"basic-navbar-nav"})]})}),s.jsxs(u,{fluid:!0,children:["low"===(null==n?void 0:n.security_level)&&s.jsxs(j,{variant:"danger",className:"mb-4",children:[s.jsx(l,{className:"me-2"}),s.jsx("strong",{children:"Security Alert:"})," Your system security level is LOW. Please review the Security Dashboard to resolve critical security issues."]}),s.jsxs(h,{activeKey:r,onSelect:e=>t(e),className:"mb-4",children:[s.jsx(p,{eventKey:"dashboard",title:"Dashboard",children:s.jsx(e.Suspense,{fallback:s.jsx(P,{}),children:s.jsx(y,{securityStatus:n,mqttStatus:S})})}),s.jsx(p,{eventKey:"devices",title:"Devices",children:s.jsx(e.Suspense,{fallback:s.jsx(P,{}),children:s.jsx(v,{})})}),s.jsx(p,{eventKey:"zones",title:"Zones",children:s.jsx(e.Suspense,{fallback:s.jsx(P,{}),children:s.jsx(g,{})})}),s.jsx(p,{eventKey:"security",title:s.jsxs("span",{children:[s.jsx(l,{className:"me-1"}),"Security",(()=>{if(!n)return null;const e=n.security_level;return"low"===e?s.jsx(m,{bg:"danger",className:"ms-1",children:"!"}):"medium"===e?s.jsx(m,{bg:"warning",className:"ms-1",children:"âš "}):null})()]}),children:s.jsx(e.Suspense,{fallback:s.jsx(P,{}),children:s.jsx(_,{})})}),s.jsx(p,{eventKey:"unified-config",title:s.jsxs("span",{children:[s.jsx(c,{className:"me-1"}),"Configuration",S?S.connected?null:s.jsx(m,{bg:"warning",className:"ms-1",children:"!"}):null]}),children:s.jsx(e.Suspense,{fallback:s.jsx(P,{}),children:s.jsx(b,{securityStatus:n})})}),s.jsx(p,{eventKey:"legacy-config",title:"Legacy Config",children:s.jsx(e.Suspense,{fallback:s.jsx(P,{}),children:s.jsx(x,{})})})]})]})]})}r.createRoot(document.getElementById("root")).render(s.jsx(t.StrictMode,{children:s.jsx(n,{children:s.jsx(S,{})})}));
